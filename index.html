<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- 
      Credits:
      - http://glslsandbox.com/e#48428.0
      - https://stackoverflow.com/a/35403253/8255070
    -->
    <title>Paul Brzeski</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Merriweather:300" rel="stylesheet">
    <link href="./semantic.min.css" rel="stylesheet">
    <link href="./styles.css" rel="stylesheet">

  </head>
  <body>
    <div id="container" class="ui stackable grid">
      <div class="sixteen wide column header">
        <div class="ui inverted secondary stackable menu">
          <div class="item">
            <h1>Paul Brzeski</h1>      
          </div>
          <ul class="right menu">
            <li class="item">
              <a href='#projects'>Projects</a>
            </li>
            <li class="item">
              <a href='#art'>Art</a>
            </li>
            <li class="item">
              <a href='#social'>Social</a>
            </li>
          </ul>
        </div>
      </div>
      <!-- Projects -->
      <h2 id="projects" class="column">Projects</h2>
      <div class="two column row">
        <div class="left floated column seven wide project">
          <a href="https://github.com/paulbrzeski/kamigen" class="image">
            <img class="ui fluid image" src="assets/kamigen.png" />
          </a>
          <div class="content">
            Kamigen is the spiritual successor to <a href="https://github.com/paulbrzeski/langenium">Langenium</a>
          </div>
        </div>
        <div class="right floated column seven wide project">
          <a href="https://github.com/paulbrzeski/manifold" class="image">
            <img class="ui fluid image" style="padding: 3em 0; filter: invert(100%);" src="assets/manifold.svg" />
          </a>
          <div class="content">
            Manifold is a 3D modelling tool for the web.
          </div>
        </div>
      </div>
       <!-- Art and Social -->
      <div class="two column row">
        <div class="floated left ten wide column">
          <h2 id="art">Art</h2>
          <div class="art">
            <div class="ui small images">
              <a class="ui image" href="https://www.deviantart.com/thezeski/art/9th-of-August-2013-Water-Effects-Comparison-424632775">
                <img src="./assets/9th_of_august_2013__water_effects_comparison_by_nimf-d70tcqv.png">
              </a>
              <a class="ui image" href="https://www.youtube.com/watch?v=bx1qSntZxVI">
                <img src="./assets/screenshot_from_langenium_staging_4_1_14_by_nimf-d70tmnb.png">
              </a>
              <a class="ui image" href="https://www.deviantart.com/thezeski/art/Langenium-Master-Timeline-W-I-P-Official-Poster-556303137">
                <img src="./assets/langenium_master_timeline__w_i_p__official_poster__by_thezeski-d977i8x.png">
              </a>
              <a class="ui image" href="https://www.deviantart.com/thezeski/art/Langenium-Mega-Poster-555921091">
                <img src="./assets/langenium_mega_poster_by_thezeski-d96zbgj.png">
              </a>
              <a class="ui image" href="https://www.deviantart.com/thezeski/art/Tree-424872361">
                <img src="./assets/tree_by_thezeski-d70yhm1.jpg">
              </a>
              <a class="ui image" href="https://www.deviantart.com/thezeski/art/1010717-17763999">
                <img src="./assets/1010717_by_nimf.jpg">
              </a>
              <a class="ui image" href="https://www.deviantart.com/thezeski/art/Blast-from-the-past-19709258">
                <img src="./assets/blast_from_the_past_by_nimf.jpg">
              </a>
              <a class="ui image" href="https://www.deviantart.com/thezeski/art/Illustration-of-Shiva-564836554">
                <img src="./assets/illustration_of_shiva_by_thezeski-d9caeoa.png">
              </a>
            </div>
          </div>
        </div>
        <div class="floated right four wide column">
          <h2 id="social">Social</h2>
          <div class="social">
            <div class="ui large labels">
              <a class="ui image black label" href='https://www.deviantart.com/thezeski'>
                <img src="assets/deviantart.png" />
                <span>DeviantArt</span>
              </a>
              <a class="ui image black label" href='https://github.com/paulbrzeski'>
                <img src="assets/github.png" />
                <span>Github</span>
              </a>
              <a class="ui image black label" href='https://www.instagram.com/paulbrzeski/'>
                <img src="assets/instagram.png" />
                <span>Instagram</span>
              </a>
              <a class="ui image black label" href='https://www.linkedin.com/in/paul-brzeski-59764b82/'>
                <img src="assets/linkedin.png" />
                <span>LinkedIn</span>
              </a>
            </div>
          </div>
        </div>
      </div>
      <br>
      <br>
      <br>
      <br>
      <br>
    </div>
    <script src="jquery-3.3.1.min.js"></script>
    <script src="semantic.min.js"></script>
    <script src="three.min.js"></script>

    <script id="vs" type="not-js">
      void main() {
        gl_Position = vec4( position, 1.0 );
      }
    </script>
    <script id="fs" type="not-js">
      #ifdef GL_ES
      precision highp float;
      #endif
       
      uniform float time;
      uniform vec2 mouse;
      uniform vec2 resolution;

      #define iterations 9
      #define formuparam2 0.89
       
      #define volsteps 10
      #define stepsize 0.190
       
      #define zoom 2.900
      #define tile   0.450
      #define speed2  0.030
       
      #define brightness 0.2
      #define darkmatter 0.320
      #define distfading 0.510
      #define saturation 0.335

      #define transverseSpeed 1.45
      #define cloud 0.253

      float triangle(float x, float a) {
        float output2 = 2.0*abs(  2.0*  ( (x/a) - floor( (x/a) + 0.3) ) ) - 1.1;
        return output2;
      }
       
      float field(in vec3 p) {
        float strength = 7. + .05 * log(1.e-6 + fract(sin(time) * 4373.11));
        float accum = 0.;
        float prev = 0.;
        float tw = 0.;

        for (int i = 0; i < 6; ++i) {
          float mag = dot(p, p);
          p = abs(p) / mag + vec3(-.5, -.8 + 0.1*sin(time*0.2 + 2.0), -1.1+0.3*cos(time*0.15));
          float w = exp(-float(i) / 7.);
          accum += w * exp(-strength * pow(abs(mag - prev), 1.3));
          tw += w;
          prev = mag;
        }
        return max(0., 5. * accum / tw - .7);
      }

      void main() {
         
        vec2 uv2 = 2. * gl_FragCoord.xy / resolution.xy - 1.;
        vec2 uvs = uv2 * resolution.xy / max(resolution.x, resolution.y);       
        float time2 = time*1.9;
        float speed = speed2;
        speed = 0.0015 * cos(time2*0.02 + 3.1415926/4.0);
        float formuparam = formuparam2;
          
        //get coords and direction
        vec2 uv = uvs;
        
               
        //mouse rotation
        float a_xz = 0.9;
        float a_yz = -.6;
        float a_xy = 0.9 + time*0.04;
        
        
        mat2 rot_xz = mat2(cos(a_xz),sin(a_xz),-sin(a_xz),cos(a_xz));
        
        mat2 rot_yz = mat2(cos(a_yz),sin(a_yz),-sin(a_yz),cos(a_yz));
          
        mat2 rot_xy = mat2(cos(a_xy),sin(a_xy),-sin(a_xy),cos(a_xy));
        

        float v2 =1.0;
        
        vec3 dir=vec3(uv*zoom,1.);
       
        vec3 from=vec3(0.0, 0.0,0.0);
       
                                     
              from.x -= .5*(-0.5);
              from.y -= .5*(-0.5);
                     
                     
        vec3 forward = vec3(0.,0.,1.);
                     
        
        from.x += transverseSpeed*(1.0)*cos(0.01*time) + 0.001*time;
        from.y += transverseSpeed*(1.0)*sin(0.01*time) + 0.001*time;
        from.z += 0.003*time;
        
        
        dir.xy*=rot_xy;
        forward.xy *= rot_xy;

        dir.xz*=rot_xz;
        forward.xz *= rot_xz;
          
        
        dir.yz*= rot_yz;
        forward.yz *= rot_yz;
         

        
        from.xy*=-rot_xy;
        from.xz*=rot_xz;
        from.yz*= rot_yz;
         
        
        //zoom
        float zooom = (time2-3311.)*speed;
        from += forward* zooom;
        float sampleShift = mod( zooom, stepsize );
         
        float zoffset = -sampleShift;
        sampleShift /= stepsize; // make from 0 to 1


        
        //volumetric rendering
        float s=0.24;
        float s3 = s + stepsize/2.0;
        vec3 v=vec3(0.);
        float t3 = 0.0;
        
        
        vec3 backCol2 = vec3(0.);
        for (int r=0; r<volsteps; r++) {
          vec3 p2=from+(s+zoffset)*dir;// + vec3(0.,0.,zoffset);
          vec3 p3=(from+(s3+zoffset)*dir )* (1.9/zoom);// + vec3(0.,0.,zoffset);
          
          p2 = abs(vec3(tile)-mod(p2,vec3(tile*2.))); // tiling fold
          p3 = abs(vec3(tile)-mod(p3,vec3(tile*2.))); // tiling fold
          
          #ifdef cloud
          t3 = field(p3);
          #endif
          
          float pa,a=pa=0.;
          for (int i=0; i<iterations; i++) {
            p2=abs(p2)/dot(p2,p2)-formuparam; // the magic formula
            float D = abs(length(p2)-pa); // absolute sum of average change
            
            if (i > 2) {
              a += i > 7 ? min( 12., D) : D;
            }
            pa=length(p2);
          }
          
        
          a*=a*a; // add contrast

          // brightens stuff up a bit
          float s1 = s+zoffset;

          // need closed form expression for this, now that we shift samples
          float fade = pow(distfading,max(0.,float(r)-sampleShift));
          
          v+=fade;

          // fade out samples as they approach the camera
          if( r == 0 )
            fade *= (1. - (sampleShift));
          // fade in samples as they approach from the distance
          if( r == volsteps-1 )
            fade *= sampleShift;
          v+=vec3(s1,s1*s1,s1*s1*s1*s1)*a*brightness*fade; // coloring based on distance
          
          backCol2 += mix(.4, 1., v2) * vec3(0.20 * t3 * t3 * t3, 0.4 * t3 * t3, t3 * 0.7) * fade;

          
          s+=stepsize;
          s3 += stepsize;
          
          
          
          }
                 
        v=mix(vec3(length(v)),v,saturation); //color adjust
         
        
        vec4 forCol2 = vec4(v*.01,1.);
        
        #ifdef cloud
        backCol2 *= cloud;
        #endif
        
        backCol2.r *= 0.55;
        backCol2.g *= 0.95;
        backCol2.b *= 1.05;
        
        gl_FragColor = vec4(backCol2, 1.0);


       
      }

    </script>

    <script>
      var $ = document.querySelector.bind(document);

      var camera = new THREE.Camera();
      camera.position.z = 1;

      var scene = new THREE.Scene();

      var geometry = new THREE.PlaneBufferGeometry(2, 2);

      var uniforms = {
        time: { type: "f", value: 1.0 },
        resolution: { type: "v2", value: new THREE.Vector2() },
        mouse: { type: "v2", value: new THREE.Vector2() },
      };

      var material = new THREE.ShaderMaterial({
        uniforms: uniforms,
        vertexShader: $('#vs').text,
        fragmentShader: $('#fs').text,
      });

      var mesh = new THREE.Mesh(geometry, material);
      scene.add(mesh);

      var renderer = new THREE.WebGLRenderer();
      document.body.appendChild(renderer.domElement);
      renderer.domElement.addEventListener('mousemove', recordMousePosition);

      render(0);

      function recordMousePosition(e) {
        // normalize the mouse position across the canvas
        // so in the shader the values go from -1 to +1
        var canvas = renderer.domElement;
        var rect = canvas.getBoundingClientRect();

        uniforms.mouse.value.x = (e.clientX - rect.left) / canvas.clientWidth  *  2 - 1;
        uniforms.mouse.value.y = (e.clientY - rect.top ) / canvas.clientHeight * -2 + 1;      
      }

      function resize() {
        var canvas = renderer.domElement;
        var dpr    = window.devicePixelRatio / 2;  // make 1 or less if too slow
        var width  = canvas.clientWidth  * dpr;
        var height = canvas.clientHeight * dpr;
        if (width != canvas.width || height != canvas.height) {
          renderer.setSize( width, height, false );
          uniforms.resolution.value.x = renderer.domElement.width;
          uniforms.resolution.value.y = renderer.domElement.height;
        }
      }

      function render(time) {
        resize();
        uniforms.time.value = time * 0.001;
        renderer.render(scene, camera);
        requestAnimationFrame(render);
      }

    </script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125551739-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-125551739-1');
    </script>
  </body>
</html>
